require=function t(i,e,s){function n(a,c){if(!e[a]){if(!i[a]){var h="function"==typeof require&&require;if(!c&&h)return h(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=e[a]={exports:{}};i[a][0].call(d.exports,function(t){var e=i[a][1][t];return n(e?e:t)},d,d.exports,t,i,e,s)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({HelloWorld:[function(t,i,e){"use strict";cc._RFpush(i,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld");var s=cc.Enum({Idle:0,Walk:1,Run:2});cc.Class({"extends":cc.Component,properties:{_animation:null,joypadStick:{"default":null,type:cc.Node},character:{"default":null,type:cc.Node},ground:{"default":[],type:cc.Node},moveX:0,seq:0},onLoad:function(){this._animation=this.node.getChildByName("character").getComponent(cc.Animation)},clickButtonIdle:function(){this.label.string="idle",this._animation.play("idle")},clickButtonWalk:function(){this.label.string="walk",this._animation.play("walk")},clickButtonRun:function(){this.label.string="run",this._animation.play("run")},clickButtonJump:function(){this.label.string="jump",this._animation.play("jump")},clickButtonLand:function(){this.label.string="land",this._animation.play("land")},update:function(t){var i=this.joypadStick.getComponent("JoypadStick").getVelocity(),e=6*i.x,n=4;switch(this.seq){case s.Idle:if(Math.abs(e)>=n){this._animation.play("run"),this.seq=s.Run;break}if(Math.abs(e)>0){this._animation.play("walk"),this.seq=s.Walk;break}break;case s.Walk:if(Math.abs(e)>=n){this._animation.play("run"),this.seq=s.Run;break}if(0===Math.abs(e)){this._animation.play("idle"),this.seq=s.Idle;break}break;case s.Run:if(0===Math.abs(e)){this._animation.play("idle"),this.seq=s.Idle;break}if(Math.abs(e)<n){this._animation.play("walk"),this.seq=s.Walk;break}}e>=0?this.character.setScale(1,1):this.character.setScale(-1,1);var o=this.ground[0].width;this.moveX+=e;var a,c=parseInt(this.moveX/o);c%2===0?(a=this.ground[0].x,a-=e,-o>a&&(a=o),a>o&&(a=-o),this.ground[0].x=a,0>a?this.ground[1].x=a+o:this.ground[1].x=a-o):(a=this.ground[1].x,a-=e,-o>a&&(a=o),a>o&&(a=-o),this.ground[1].x=a,0>a?this.ground[0].x=a+o:this.ground[0].x=a-o)}}),cc._RFpop()},{}],JoypadButton:[function(t,i,e){"use strict";cc._RFpush(i,"ec202tjY09HcZH4NdRLU272","JoypadButton"),cc.Class({"extends":cc.Component,properties:{defaultSF:{"default":null,type:cc.SpriteFrame,visible:!1},disabledSF:{"default":null,type:cc.SpriteFrame},pressedSF:{"default":null,type:cc.SpriteFrame},_spriteButton:{"default":null,type:cc.Sprite},isHoldable:!1,isToggleable:!1,_value:0,_status:1,_active:!1,Radius:{"default":0,type:Number,tooltip:"if 0 then Radius = Image.Width / 2"},_radiusSq:0,FPS:120,_rateLimit:1/this.FPS,_running:!1},onLoad:function(){this._rateLimit=1/this.FPS,this._spriteButton=this.node.addComponent(cc.Sprite),this.defaultSF=this._spriteButton.spriteFrame,this._centerPosition=cc.p(this.node.getContentSize().width/2,this.node.getContentSize().height/2),0===this.Radius&&(this.Radius=this._centerPosition.x),this._radiusSq=Math.pow(this.Radius,2),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this),onTouchCanceled:this.onTouchCanceled.bind(this)},this.node),this._running=!0},onTouchBegan:function(t,i){if(!this._active){var e=this.node.convertToNodeSpace(t.getLocation());e=cc.v2(e.x-this._centerPosition.x,e.y-this._centerPosition.y);var s=Math.pow(e.x,2)+Math.pow(e.y,2);return this._radiusSq>s?(this._active=!0,this.isToggleable?this._value^=1:this._value=1,this.isHoldable||this.isToggleable||this.scheduleOnce(function(){this._value=0,this._active=!1},this._rateLimit),!0):!1}},onTouchMoved:function(t,i){if(this._active&&!this.isToggleable){var e=this.node.convertToNodeSpace(t.getLocation());e=cc.v2(e.x-this._centerPosition.x,e.y-this._centerPosition.y);var s=Math.pow(e.x,2)+Math.pow(e.y,2);this._radiusSq>s?this.isHoldable&&(this._value=1):this.isHoldable&&(this._value=0,this._active=!1)}},onTouchEnded:function(t,i){this._active&&(this.isHoldable&&!this.isToggleable&&(this._value=0),(this.isHoldable||this.isToggleable)&&(this._active=!1))},onTouchCanceled:function(t,i){this.onTouchEnded(t,i)},update:function(t){this._running&&(this._status?0===this._value?this._spriteButton.spriteFrame=this.defaultSF:this._spriteButton.spriteFrame=this.pressedSF:this._spriteButton.spriteFrame=this.disabledSF)},getValue:function(){return this._value},getStatus:function(){return this._status},setStatus:function(t){this._status=t}}),cc._RFpop()},{}],JoypadStick:[function(t,i,e){"use strict";cc._RFpush(i,"22670/ISDNHR47aCoPWv76u","JoypadStick"),cc.Class({"extends":cc.Component,properties:{SJ_PI_X_2:{"default":2*Math.PI,type:Number,visible:!1,readonly:!0},SJ_DEG2RAD:{"default":Math.PI/180,type:Number,visible:!1,readonly:!0},SJ_RAD2DEG:{"default":180/Math.PI,type:Number,visible:!1,readonly:!0},Thumb:{"default":null,type:cc.Node,visible:!1},Directions:8,HasDeadzone:!0,DeadRadius:20,_DeadRadiusSq:400,AutoCenter:!0,isDPad:!0,_degrees:0,_velocity:cc.Vec2.ZERO,JoystickRadius:{"default":0,type:Number,tooltip:"if 0 then radius = Image.Width / 2"},_JoystickRadiusSq:0,_stickPosition:{"default":cc.Vec2.ZERO,type:cc.Vec2},_centerPosition:cc.Vec2.ZERO,_running:!1},onLoad:function(){this._DeadRadiusSq=Math.pow(this.DeadRadius,2),this._centerPosition=cc.p(this.node.getContentSize().width/2,this.node.getContentSize().height/2),0===this.JoystickRadius&&(this.JoystickRadius=this._centerPosition.x),this._JoystickRadiusSq=Math.pow(this.JoystickRadius,2),this.Thumb=this.node.getChildByName("Thumb"),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this),onTouchCanceled:this.onTouchCanceled.bind(this)},this.node),this._running=!0},onTouchBegan:function(t,i){var e=this.node.convertToNodeSpace(t.getLocation());e=cc.p(e.x-this._centerPosition.x,e.y-this._centerPosition.y);var s=Math.pow(e.x,2)+Math.pow(e.y,2);return this._JoystickRadiusSq>s?(this.updateVelocity(e),!0):!1},onTouchMoved:function(t,i){var e=this.node.convertToNodeSpace(t.getLocation());e=cc.p(e.x-this._centerPosition.x,e.y-this._centerPosition.y),this.updateVelocity(e)},onTouchEnded:function(t,i){var e=cc.Vec2.ZERO;this.AutoCenter||(e=this.node.convertToNodeSpace(t.getLocation()),e=cc.p(e.x-this._centerPosition.x,e.y-this._centerPosition.y)),this.updateVelocity(e)},onTouchCanceled:function(t,i){this.onTouchEnded(t,i)},updateVelocity:function(t){var i=t.x,e=t.y,s=Math.pow(i,2)+Math.pow(e,2);if(s<=this._DeadRadiusSq)return this._velocity=cc.Vec2.ZERO,this._degrees=0,void(this._stickPosition=cc.Vec2.ZERO);var n=Math.atan2(e,i);if(0>n&&(n+=this.SJ_PI_X_2),this.isDPad){var o=360/this.Directions*this.SJ_DEG2RAD;n=Math.floor(n/o+.5)*o}var a=this.calcRound(Math.cos(n),3),c=this.calcRound(Math.sin(n),3);(s>this._JoystickRadiusSq||this.isDPad)&&(i=a*this.JoystickRadius,e=c*this.JoystickRadius),this.isDPad?this._velocity=cc.p(a,c):this._velocity=cc.p(i/this.JoystickRadius,e/this.JoystickRadius),this._degrees=n*this.SJ_RAD2DEG,this._stickPosition=cc.p(i,e)},update:function(t){this._running&&null!==this.Thumb&&null!==this._stickPosition&&this.Thumb.setPosition(this._stickPosition)},calcRound:function(t,i){var e=Math.pow(10,i);return Math.floor(t*e+.5)/e},getVelocity:function(){return this._velocity}}),cc._RFpop()},{}]},{},["JoypadStick","HelloWorld","JoypadButton"]);